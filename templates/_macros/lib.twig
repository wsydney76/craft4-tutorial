{% macro img(image, config = []) %}
    {% set transform = config.transform ?? {width: 825} %}

    {% if transform.format is not defined %}
        {% set transform = transform|merge({format: 'webp'}) %}
    {% endif %}

    {% set srcset = config.srcset ?? [825, 480] %}

    {% if transform.width is defined and transform.width < 480 %}
        {% set srcset = null %}
    {% endif %}


    {% set attr = config.attr ?? {loading: 'lazy'} %}

    {% set attr = attr | merge({alt: image.altText ?: image.title}) %}
    {{ image.img(transform, srcset)|attr(attr) }}
    
{% endmacro %}

{# This must be called within a figure tag with position: relative #}
{% macro copyrightOverlay(copyright) %}
    {% if copyright %}
        <figcaption class="absolute bottom-0 right-0 px-2 py-1 bg-black/50 text-white text-sm">
            {{ 'Photo'|t }}: {{ copyright }}
        </figcaption>
    {% endif %}
{% endmacro %}

